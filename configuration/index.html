
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.1">
    
    
      
        <title>Device Configuration - Open Management</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.9299cb39.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="orange">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Open Management" class="md-header__button md-logo" aria-label="Open Management" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Open Management
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Device Configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Open Management" class="md-nav__button md-logo" aria-label="Open Management" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Open Management
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Open Management
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        Configuration
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Device Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Device Configuration
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openconfig" class="md-nav__link">
    OpenConfig
  </a>
  
    <nav class="md-nav" aria-label="OpenConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#platform-compatibility" class="md-nav__link">
    Platform compatibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnmi" class="md-nav__link">
    GNMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#octa" class="md-nav__link">
    OCTA
  </a>
  
    <nav class="md-nav" aria-label="OCTA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-enable-octa" class="md-nav__link">
    How to enable Octa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-models" class="md-nav__link">
    API models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-based-authentication-for-gnmi" class="md-nav__link">
    Certificate based authentication for gNMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-example" class="md-nav__link">
    Test example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netconf" class="md-nav__link">
    NETCONF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restconf" class="md-nav__link">
    RESTCONF
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-note-on-changing-ports" class="md-nav__link">
    A note on changing ports
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rpc-role-authorizations" class="md-nav__link">
    RPC role authorizations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-aft-mapping" class="md-nav__link">
    Enable AFT mapping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-openconfig-paths" class="md-nav__link">
    Supported OpenConfig paths
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-resources" class="md-nav__link">
    References / Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Examples
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        examples
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        Ansible
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Ansible" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Ansible
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/ansible/" class="md-nav__link">
        Ansible playbook example demo
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      <label class="md-nav__link" for="__nav_3_3">
        Gnmi clients
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Gnmi clients" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Gnmi clients
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_1" type="checkbox" id="__nav_3_3_1" >
      
      <label class="md-nav__link" for="__nav_3_3_1">
        Arista gnmi
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Arista gnmi" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_3_1">
          <span class="md-nav__icon md-icon"></span>
          Arista gnmi
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/gnmi-clients/arista-gnmi/" class="md-nav__link">
        Arista gNMI client examples
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_2" type="checkbox" id="__nav_3_3_2" >
      
      <label class="md-nav__link" for="__nav_3_3_2">
        Gnmic
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Gnmic" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_3_2">
          <span class="md-nav__icon md-icon"></span>
          Gnmic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/gnmi-clients/gnmic/" class="md-nav__link">
        gNMIC examples
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      <label class="md-nav__link" for="__nav_3_4">
        Gnmi gateway
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Gnmi gateway" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Gnmi gateway
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/gnmi-gateway/" class="md-nav__link">
        gNMI-Gateway
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      <label class="md-nav__link" for="__nav_3_5">
        Golang
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Golang" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Golang
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/golang/" class="md-nav__link">
        golang
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      <label class="md-nav__link" for="__nav_3_6">
        Python
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Python" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../examples/python/" class="md-nav__link">
        python
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Models
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Models" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../models/" class="md-nav__link">
        Device Models
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Protocols
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Protocols" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Protocols
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../protocols/" class="md-nav__link">
        Management Protocols
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Telemetry
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Telemetry" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Telemetry
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../telemetry/" class="md-nav__link">
        Device Telemetry
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#openconfig" class="md-nav__link">
    OpenConfig
  </a>
  
    <nav class="md-nav" aria-label="OpenConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#platform-compatibility" class="md-nav__link">
    Platform compatibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnmi" class="md-nav__link">
    GNMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#octa" class="md-nav__link">
    OCTA
  </a>
  
    <nav class="md-nav" aria-label="OCTA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-enable-octa" class="md-nav__link">
    How to enable Octa
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-models" class="md-nav__link">
    API models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-based-authentication-for-gnmi" class="md-nav__link">
    Certificate based authentication for gNMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-example" class="md-nav__link">
    Test example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#netconf" class="md-nav__link">
    NETCONF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restconf" class="md-nav__link">
    RESTCONF
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-note-on-changing-ports" class="md-nav__link">
    A note on changing ports
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rpc-role-authorizations" class="md-nav__link">
    RPC role authorizations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-aft-mapping" class="md-nav__link">
    Enable AFT mapping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-openconfig-paths" class="md-nav__link">
    Supported OpenConfig paths
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-resources" class="md-nav__link">
    References / Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Device Configuration</h1>
                
                <ul>
<li><a href="#Overview">Overview</a></li>
<li><a href="#cli">CLI</a></li>
<li><a href="#-openconfig-configuration">OpenConfig (configuration)</a></li>
<li><a href="#platform-compatibility">Platform compatibility</a></li>
<li><a href="#gnmi">GNMI</a></li>
<li><a href="#octa">OCTA</a><ul>
<li><a href="#how-to-enable-octa">How to enable Octa</a></li>
<li><a href="#api-models">API models</a></li>
<li><a href="#certificate-based-authentication-for-gnmi">Certificate based authentication for gNMI</a></li>
<li><a href="#test-example">Test example</a></li>
</ul>
</li>
<li><a href="#netconf">NETCONF</a></li>
<li><a href="#restconf">RESTCONF</a></li>
<li><a href="#a-note-on-changing-ports">A note on changing ports</a></li>
<li><a href="#grpc">gRPC</a></li>
<li><a href="#rpc-role-authorizations">RPC role authorizations</a></li>
<li><a href="#enable-aft-mapping">Enable AFT mapping</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#supported-openconfig-paths">Supported OpenConfig paths</a></li>
<li><a href="#references--resources">References / Resources</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>There are a number of options for working with open management protocols with Arista EOS.
Here are the methods used to configre them on EOS as well as troubleshooting tips.</p>
<h2 id="openconfig">OpenConfig</h2>
<h3 id="platform-compatibility">Platform compatibility</h3>
<p>All EOS flavors support OpenConfig (phyiscal, virtual, containerized, cloud).</p>
<h3 id="gnmi">GNMI</h3>
<p>To start the gNMI server, which listens by default on TCP/6030 configured the
gRPC transport under <code>management api gnmi</code> in the global config mode:</p>
<p>Default VRF</p>
<pre><code class="language-text">management api gnmi
  transport grpc openmgmt
</code></pre>
<p>Non-default VRF</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
     vrf management
</code></pre>
<p>Changing the port:</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
      port 5900
</code></pre>
<p>Apply ACL</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
      ip access-group ACCESS_GROUP
</code></pre>
<p>Note The ACL should be a standard ACL allowing hosts or subnets.</p>
<p>Authenticate the connection with TLS</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
      ssl profile PROFILE
</code></pre>
<p>Enable authorization of incoming requests</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
      authorization requests
</code></pre>
<p>Status check</p>
<pre><code class="language-text">#show management api gnmi
Octa:               No
Enabled:            Yes
Server:             running on port 6030, in default VRF
SSL Profile:        none
QoS DSCP:           none
</code></pre>
<h3 id="octa">OCTA</h3>
<p>The OpenConfing agent (gNMI API) can leverage the EOS state streaming agent's
(TerminAttr) libraries, thus exposing EOS native paths. If Octa
(OpenConfig+TerminAttr) is enabled then OpenConfig, in addition to accepting
OpenConfig paths in gNMI get/subscribe requests, will also support EOS native
paths (e.g. Sysdb/Smash paths). This feature was introduced in <code>4.22.1F</code>.</p>
<p>gNMI requests received by Octa are interpreted as either OpenConfig or
TerminAttr requests, as follows.</p>
<ul>
<li>gNMI requests containing an origin of <code>eos_native</code> are processed as TerminAttr
  requests.</li>
<li>Requests lacking an origin of <code>eos_native</code> are treated as OpenConfig requests.</li>
</ul>
<p>A gNMI client that supports specification of an origin as part of the associated
RPC is a requirement.</p>
<p>Note Support for sending GET/SUBSCRIBE requests to both an openconfig and an
eos-native path in the same call is not yet supported.</p>
<h4 id="how-to-enable-octa">How to enable Octa</h4>
<p>Octa can be enable by adding <code>provider eos-native</code> under <code>management api gnmi</code></p>
<p><code>SW(config-mgmt-api-gnmi)#provider eos-native</code></p>
<p>Status check</p>
<pre><code class="language-text">#show management api gnmi
Octa:               enabled
Enabled:            Yes
Server:             running on port 6030, in default VRF
SSL Profile:        none
QoS DSCP:           none
</code></pre>
<h4 id="api-models">API models</h4>
<p>Starting in EOS <code>4.24.0F</code> it is possible to configure the Smash paths that Octa
has access to. Under the <code>management api models</code> mode, the provider smash
submode allows for enabling or disabling a Smash path with the <code>[no] path &lt;Smash
path&gt; [disbaled]</code> command.</p>
<pre><code class="language-text">SW(config)#management api models
SW(config-mgmt-api-models)#provider smash
SW(config-provider-smash)#path forwarding/status
SW(config-provider-smash)#path routing/status disabled
SW(config-provider-smash)#path routing/isis/lsdb
SW(config-provider-smash)#exit
</code></pre>
<p>Note that every time a new path is added the Octa agent has to be restarted.
EOS CLI:</p>
<pre><code class="language-text">(config)#management api gnmi
(config-mgmt-api-gnmi)#transport grpc &lt;NAME&gt;
(config-gnmi-transport-def)#shut
(config-gnmi-transport-def)#no shut
</code></pre>
<p>Bash:
<code>$ sudo killall Octa</code></p>
<p><code>show management api models</code> will list the Smash paths enabled/disabled</p>
<p>e.g.:</p>
<pre><code class="language-text">#show management api models
provider smash
  path /Smash/bridging
  path /Smash/forwarding/status
  path /Smash/routing/isis/lsdb
  path /Smash/routing
  path /Smash/routing/status disabled
provider sysdb
</code></pre>
<h4 id="certificate-based-authentication-for-gnmi">Certificate based authentication for gNMI</h4>
<p>The following example shows how to create a Root CA cert and key, the server
cert and key and the client cert and key.</p>
<p>On the switch side:</p>
<p>1. Generate the private key for the CA:</p>
<p><code>openssl genrsa -out rootCA.key 2048</code></p>
<p>2. Generate the CA certificate:</p>
<p><code>openssl req -x509 -new -nodes -key rootCA.key -out rootCA.pem</code></p>
<p>3. Generate the server key:</p>
<p><code>openssl genrsa -out gnmi_server.key 2048</code></p>
<p>4. Generate the server's certificate signing request:</p>
<p><code>openssl req -new -key gnmi_server.key -out gnmi_server.csr</code></p>
<p>5. Generate the server's cert:</p>
<pre><code class="language-shell">openssl x509 -req -in gnmi_server.csr -CA rootCA.pem -CAkey rootCA.key \
-CAcreateserial -out gnmi_server.crt`
</code></pre>
<p>6. copy <code>rootCA.key</code> and <code>rootCA.pem</code> to the gNMI collector</p>
<p>7. Exit from bash and copy <code>rootCA.key</code> and <code>gnmi_server.key</code> to sslkey
   directory. e.g.:</p>
<p><code>copy flash:gnmi_server.key sslkey:</code>)</p>
<p>8. copy <code>rootCA.pem</code> and  <code>gnmi_server.crt</code> to certificate directory, e.g.:</p>
<p><code>copy  flash:scripts/rootCA.pem certificate:</code></p>
<p>9. Create the SSL profile</p>
<pre><code class="language-text">management security
   ssl profile gnmi
      certificate gnmi_server.crt key gnmi_server.key
      trust certificate rootCA.pem
</code></pre>
<p>10. Apply the profile</p>
<pre><code class="language-text">management api gnmi
   transport grpc def
      ssl profile gnmi
   provider eos-native
</code></pre>
<p>On the remote machine which runs the gNMI queries:</p>
<p>1. Generate the client key:</p>
<p><code>openssl genrsa -out gnmi_client.key 2048</code></p>
<p>2. Generate the certificate signing request:</p>
<p><code>openssl req -new -key gnmi_client.key -out gnmi_client.csr</code></p>
<p>3. Sign the cert and generate the .crt file:</p>
<pre><code class="language-shell">openssl x509 -req -in gnmi_client.csr -CA rootCA.pem -CAkey rootCA.key \
-CAcreateserial -out gnmi_client.crt
</code></pre>
<p>4. Make sure that <code>rootCA.key</code> and <code>rootCA.pem</code> are in same directory as
   <code>gnmi_client.key</code> and <code>gnmi_client.crt</code></p>
<h4 id="test-example">Test example</h4>
<pre><code class="language-shell">gnmi -tls -addr 172.28.161.138:6030 -keyfile gnmi_client.key \
  -certfile gnmi_client.crt get '/interfaces/interface[name=*]/state/counters'


/interfaces/interface[name=Management1]/state/counters:
{
  &quot;openconfig-interfaces:in-broadcast-pkts&quot;: &quot;14498549&quot;,
  &quot;openconfig-interfaces:in-discards&quot;: &quot;0&quot;,
  &quot;openconfig-interfaces:in-errors&quot;: &quot;0&quot;,
  &quot;openconfig-interfaces:in-fcs-errors&quot;: &quot;0&quot;,
  &quot;openconfig-interfaces:in-multicast-pkts&quot;: &quot;20571&quot;,
  &quot;openconfig-interfaces:in-octets&quot;: &quot;1042742343&quot;,
  &quot;openconfig-interfaces:in-unicast-pkts&quot;: &quot;61135&quot;,
  &quot;openconfig-interfaces:out-broadcast-pkts&quot;: &quot;20&quot;,
  &quot;openconfig-interfaces:out-discards&quot;: &quot;0&quot;,
  &quot;openconfig-interfaces:out-errors&quot;: &quot;0&quot;,
  &quot;openconfig-interfaces:out-multicast-pkts&quot;: &quot;20232&quot;,
  &quot;openconfig-interfaces:out-octets&quot;: &quot;12004699&quot;,
  &quot;openconfig-interfaces:out-unicast-pkts&quot;: &quot;49070&quot;
}

</code></pre>
<h3 id="netconf">NETCONF</h3>
<p>Currently supported NETCONF operations: get, get-config, get-schema,
edit-config, lock, unlock, close-session, kill-session.</p>
<p>To configure NETCONF in default VRF we can enable the ssh transport under
<code>management api netconf</code>:</p>
<p>Default VRF</p>
<pre><code class="language-text">management api netconf
   transport ssh test
</code></pre>
<p>Non-default VRF</p>
<pre><code class="language-text">management api netconf
   transport ssh test
      vrf management
</code></pre>
<p>Changing the port:</p>
<pre><code class="language-text">management api netconf
   transport ssh test
      port 830
</code></pre>
<p>Apply ACL</p>
<pre><code class="language-text">management api netconf
   transport ssh test
      ip access-group ACCESS_GROUP
</code></pre>
<p>Note The ACL should be a standard ACL allowing hosts or subnets.</p>
<p>Status check:</p>
<pre><code class="language-text">#show management api netconf

Enabled:            Yes
Server:             running on port 830, in management VRF
</code></pre>
<h3 id="restconf">RESTCONF</h3>
<p>TLS authentication is required for RESTCONF to operate.</p>
<p>This Cli command generates a self-signed cert:</p>
<pre><code class="language-text">security pki certificate generate self-signed restconf.crt key restconf.key generate rsa 2048 parameters common-name restconf
</code></pre>
<p>Create ssl profile:</p>
<pre><code class="language-text">management security
   ssl profile restconf
   certificate restconf.crt key restconf.key
</code></pre>
<p>Configure RESTCONF:</p>
<p>Default VRF:</p>
<pre><code class="language-text">management api restconf
   transport https test
   ssl profile restconf
</code></pre>
<p>Non-default VRF</p>
<pre><code class="language-text">management api restconf
   transport https test
   ssl profile restconf
   vrf management
</code></pre>
<p>Changing the port:</p>
<pre><code class="language-text">management api restconf
   transport https test
      port 5900
</code></pre>
<p>Apply ACL</p>
<pre><code class="language-text">management api restconf
   transport https test
      ip access-group ACCESS_GROUP
</code></pre>
<blockquote>
<p>Note The ACL should be a standard ACL allowing hosts or subnets.</p>
</blockquote>
<p>Status check</p>
<pre><code class="language-text">#show management api restconf
Enabled:            Yes
Server:             running on port 6020, in management VRF
SSL Profile:        restconf
QoS DSCP:           none
</code></pre>
<h2 id="a-note-on-changing-ports">A note on changing ports</h2>
<p>When changing the default ports one has to make sure they are also allowed in
the control-plane ACL. The default control-plane ACL cannot be modified, so a
new one has to be created and applied under <code>system control-plane</code> (EOS <code>4.23+</code>)
or <code>control-plane</code> (pre-EOS <code>4.23</code>). The fastest way to do this is to clone the
existing control-plane and add new permit rules.</p>
<p>e.g.:</p>
<p>1. Reading the default CP ACL can be done with <code>show ip access-lists default-control-plane-acl</code></p>
<pre><code class="language-text">#show ip access-lists default-control-plane-acl
IP Access List default-control-plane-acl [readonly]
        counters per-entry
        10 permit icmp any any [match 7172 packets, 1 day, 20:46:09 ago]
        20 permit ip any any tracked [match 98544013 packets, 0:00:36 ago]
        30 permit udp any any eq bfd ttl eq 255
        40 permit udp any any eq bfd-echo ttl eq 254
        50 permit udp any any eq multihop-bfd
        60 permit udp any any eq micro-bfd
        70 permit udp any any eq sbfd
        80 permit udp any eq sbfd any eq sbfd-initiator
        90 permit ospf any any
        100 permit tcp any any eq ssh telnet www snmp bgp https msdp ldp netconf-ssh gnmi [match 873 packets, 1 day, 20:43:39 ago]
        110 permit udp any any eq bootps bootpc snmp rip ntp ldp [match 970 packets, 1:43:38 ago]
        120 permit tcp any any eq mlag ttl eq 255
        130 permit udp any any eq mlag ttl eq 255
        140 permit vrrp any any
        150 permit ahp any any
        160 permit pim any any
        170 permit igmp any any
        180 permit tcp any any range 5900 5910
        190 permit tcp any any range 50000 50100 [match 1480505 packets, 1 day, 20:43:16 ago]
        200 permit udp any any range 51000 51100
        210 permit tcp any any eq 3333
        220 permit tcp any any eq nat ttl eq 255
        230 permit tcp any eq bgp any
        240 permit rsvp any any
        250 permit tcp any any eq 6040
        260 permit tcp any any eq 5541 ttl eq 255
        270 permit tcp any any eq 5542 ttl eq 255
</code></pre>
<p>2. There are multiple ways to quickly edit and remove the unnecessary match
   outputs, in this example we'll use <code>sed</code> on EOS. Save the file to <code>/mnt/flash</code>:</p>
<p><code>show ip access-lists  default-control-plane-acl | redirect flash:cpacl.txt</code></p>
<p>3. Drop down to bash: <code>#bash</code></p>
<p>4. Go to /mnt/flash and remove the match outputs</p>
<pre><code class="language-shell">cd /mnt/flash
sudo sed -i  &quot;s/\[.*//g&quot; cpacl.txt
</code></pre>
<p>5. Reading the file now should be clean without all the match outputs like
   below:</p>
<pre><code class="language-text">cat cpacl.txt
IP Access List default-control-plane-acl
        counters per-entry
        10 permit icmp any any
        20 permit ip any any tracked
        30 permit udp any any eq bfd ttl eq 255
        40 permit udp any any eq bfd-echo ttl eq 254
        50 permit udp any any eq multihop-bfd
        60 permit udp any any eq micro-bfd
        70 permit udp any any eq sbfd
        80 permit udp any eq sbfd any eq sbfd-initiator
        90 permit ospf any any
        100 permit tcp any any eq ssh telnet www snmp bgp https msdp ldp netconf-ssh gnmi
        110 permit udp any any eq bootps bootpc snmp rip ntp ldp
        120 permit tcp any any eq mlag ttl eq 255
        130 permit udp any any eq mlag ttl eq 255
        140 permit vrrp any any
        150 permit ahp any any
        160 permit pim any any
        170 permit igmp any any
        180 permit tcp any any range 5900 5910
        190 permit tcp any any range 50000 50100
        200 permit udp any any range 51000 51100
        210 permit tcp any any eq 3333
        220 permit tcp any any eq nat ttl eq 255
        230 permit tcp any eq bgp any
        240 permit rsvp any any
        250 permit tcp any any eq 6040
        260 permit tcp any any eq 5541 ttl eq 255
        270 permit tcp any any eq 5542 ttl eq 255
</code></pre>
<p>6. Now we can just copy that ACLs content into a new ACL, add our new rules and
   apply it on the control-plane</p>
<pre><code class="language-text">$ exit
logout
(config)# ip access-list custom-cp
(config)#
&lt;paste the content of the default CP from the file created&gt;
(config)# 280 permit tcp any any eq 5900
</code></pre>
<p>7. Apply the new ACL</p>
<p>Default VRF</p>
<pre><code class="language-text">sysem control-plane
   ip access-group custom-cp in
</code></pre>
<p>Non-default VRF</p>
<pre><code class="language-text">sysem control-plane
   ip access-group custom-cp vrf management in
</code></pre>
<h2 id="rpc-role-authorizations">RPC role authorizations</h2>
<p>Starting in EOS <code>4.24.1F</code> it is possible to perform authorization of each RPC
(i.e. GET, SET, SUBSCRIBE), if authorization requests is supplied as described
above.</p>
<p>During authorization, the OpenConfig agent will communicate with the AAA agent,
allowing authorization policies or roles to permit or deny the new tokens
OpenConfig.Get and OpenConfig.Set.</p>
<p>For example, a role may be defined such as:</p>
<pre><code class="language-text">role oc-read
   10 permit command OpenConfig.Get
</code></pre>
<p>A user which is assigned to this role would be allowed to issue a gNMI get or
subscribe request, but not a set request.</p>
<blockquote>
<p>Note that this is only available for gNMI.</p>
</blockquote>
<h2 id="enable-aft-mapping">Enable AFT mapping</h2>
<p>By default, mapping of the FIB (forwarding information base) to the OpenConfig
AFT (abstract forwarding table) model is disabled, as the volume of data can be
large.</p>
<p>Starting in EOS <code>4.25.1F</code> it is possible to enable these mappings, for IPV4, IPV6,
or both, as described below:</p>
<pre><code class="language-text">management api models
    ipv4-unicast
    ipv6-unicast
</code></pre>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>The OpenConfig agent handles all transports described above: gNMI, RESTCONF, and
NETCONF. The agent log file is present at <code>/var/log/agents/OpenConfig-{PID}</code>.
Lines that begin with <code>E</code> are errors. Debug logging can be enabled with a
regular trace command. Here are a couple of examples:</p>
<p><code>(config)#trace OpenConfig setting server/9</code> # For server (gNMI) traces</p>
<p><code>(config)#trace OpenConfig setting */9</code> # For all traces with verbose setting</p>
<p>similary if Octa is enabled:</p>
<p><code>(config)#trace Octa setting server/9</code> # For server (gNMI) traces</p>
<p><code>(config)#trace Octa setting */9</code> # For all traces with verbose setting</p>
<h2 id="limitations">Limitations</h2>
<ul>
<li>
<p>In EOS versions older than <code>4.24.0F</code>, not all Smash paths were accessible via
  Octa.</p>
</li>
<li>
<p>Starting in EOS <code>4.24.0F</code> configuring the Smash paths that Octa has access to
  will also affect OpenConfig. Enabling a Smash path for Octa can result in
  extra YANG paths being populated in OpenConfig. Disabling a Smash path can
  result in having some YANG paths missing in OpenConfig.</p>
</li>
<li>
<p>The <code>%&lt;zone-id&gt;</code> optional suffix in YANG <code>ietf:ipv4-address</code>, and
  <code>ietf:ipv6-address</code> types are not supported.</p>
</li>
<li>An OpenConfig client update/merge/replace request can erase config that is not
  modified by the incoming request. This happens if a config that is part of a
  certain mountpoint but not supported by OpenConfig is configured via CLI prior
  to the OpenConfig client update/merge/replace request is processed.</li>
<li>Below listed commands are the only QoS config commands that are supported</li>
</ul>
<pre><code class="language-text">class-map type qos match-any &lt;cm name&gt;
    match vlan &lt;vlan id&gt;

policy-map type qos &lt;pmap name&gt;
    class &lt;cm name&gt;
        police cir &lt;cir&gt; bc &lt;burst&gt; kbytes
    class class-default

interface Ethernet&lt;xx&gt; | port-channel&lt;yy&gt;
    service-policy type qos input &lt;pmap name&gt;
</code></pre>
<h2 id="supported-openconfig-paths">Supported OpenConfig paths</h2>
<p>Please refer to the TOIs for the EOS releases to see the new list of paths
supported per release.</p>
<p>For convenience, supported paths may be found at
<a href="https://eos.arista.com/path-report">https://eos.arista.com/path-report</a>.</p>
<h2 id="references-resources">References / Resources</h2>
<ul>
<li>The OpenConfig working group: <a href="http://openconfig.net/">http://openconfig.net/</a></li>
<li>Repository of gNMI specifications: <a href="https://github.com/openconfig/reference/">https://github.com/openconfig/reference/</a></li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href=".." class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Open Management
            </div>
          </div>
        </a>
      
      
        <a href="../examples/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              examples
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.7353b375.min.js"></script>
      
    
  </body>
</html>